<!DOCTYPE html>
<html>
<head>
    <title>Players</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-4">
  <div class="container-fluid">
    <a class="navbar-brand" href="/">üèÄ Team Manager</a>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a class="nav-link active" href="/players">Players</a></li>
        <li class="nav-item"><a class="nav-link" href="/practice-exercises">Practice Exercises</a></li>
        <li class="nav-item"><a class="nav-link" href="/tournaments">Tournaments</a></li>
        <li class="nav-item"><a class="nav-link" href="/practice-register">Practice Register</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- Accordion-Like Toggle Bar -->
<div class="card mb-4 border-0 shadow-sm">
  <div class="card-header d-flex justify-content-between align-items-center"
       style="cursor: pointer; background-color: #f4ede4; color: #343a40; font-weight: bold; border-radius: .5rem .5rem 0 0;"
       onclick="toggleForm()">
    <span>‚ûï Players</span>
    <span id="toggleIcon">‚ñº</span>
  </div>
  <div id="playerForm" class="card-body {% if not open_form %}d-none{% endif %}">

    <form method="post" class="row g-3">
      <div class="col-md-4">
        <label class="form-label">Season Year</label>
        <input name="season_year" class="form-control" required>
      </div>
    
      <div class="col-md-4">
        <label class="form-label">Name</label>
        <input name="name" class="form-control" required>
      </div>
    
      <div class="col-md-4">
        <label class="form-label">Escal√£o</label>
        <input name="escalao" class="form-control" required>
      </div>
    
      <div class="col-md-4">
        <label class="form-label">N¬∫ Carteira</label>
        <input name="n_carteira" class="form-control" required>
      </div>
    
      <div class="col-md-4">
        <label class="form-label">Date of Birth</label>
        <input type="date" name="dob" class="form-control" required>
      </div>
    
      <div class="col-md-4">
        <label class="form-label">Mobile Phone</label>
        <input name="mobile_phone" class="form-control">
      </div>
    
      <div class="col-md-6">
        <label class="form-label">Email</label>
        <input type="email" name="email" class="form-control">
      </div>
    
      <div class="col-12">
        <button type="submit" class="btn btn-success">Add Player</button>
      </div>
    </form>
  </div>
</div>
<hr>
<h2 class="mt-4">Team Roster</h2>

<table class="table table-striped table-bordered mt-3">
  <thead class="table-dark">
    <tr>
      <th>Name</th>
      <th>Escal√£o</th>
      <th>Carteira</th>
      <th>DOB</th>
      <th>Phone</th>
      <th>Email</th>
    </tr>
  </thead>
  <tbody>
    {% for player in players %}
      <tr>
        <td>{{ player.name }}</td>
        <td>{{ player.escalao }}</td>
        <td>{{ player.n_carteira }}</td>
        <td>{{ player.dob }}</td>
        <td>{{ player.mobile_phone }}</td>
        <td>{{ player.email }}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
</div> <!-- end .container -->

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  function toggleForm() {
    const form = document.getElementById('playerForm');
    const icon = document.getElementById('toggleIcon');
    const isHidden = form.classList.contains('d-none');

    if (isHidden) {
      form.classList.remove('d-none');
      icon.innerText = '‚ñº';
    } else {
      form.classList.add('d-none');
      icon.innerText = '‚ûï';
    }
  }

  // Adjust icon state if form is open by default
  window.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('playerForm');
    const icon = document.getElementById('toggleIcon');
    if (!form.classList.contains('d-none')) {
      icon.innerText = '‚ñº';
    }
  });
</script>
</body>
</html>
